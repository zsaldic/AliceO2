<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Project: Detector simulation documentation</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d8/dfb/md_DetectorSimulation.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Detector simulation documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The present document collects information about the ALICE detector simulation executable and digitization procedure used in LHC Run3.</p>
<h2>Overview</h2>
<p>Detector simulation, the simulation of detector response from virtual particle events, consists of essentialy 2 parts: a) the generation of simple (energy deposit) traces in the detector due to the passage of particles and the interaction with the detector material. b) the conversion of those traces into (electronic) signals in the detector readout (usually called digitization).</p>
<p>The first part is handled by the <code>o2sim</code> executable. The second part is handled in the <code>digitizer-workflow</code>.</p>
<h1>Documentation of <code>o2sim</code></h1>
<p>The purpose of the <code>o2sim</code> executable is to simulate the passage of particles emerging from a collision inside the detector and to obtain their effect in terms of energy deposits (called hits) which could be converted into detectable signals.</p>
<h2>Command overview</h2>
<ul>
<li><b>Basic help:</b> Help on command line options can be obtained with <code>o2sim --help</code></li>
<li><p class="startli"><b>Typical example:</b> <a class="el" href="../../d4/dc4/structA.html">A</a> typical (exemplary) invocation is of the form</p>
<p class="startli"><code>o2sim -n 10 -g pythia8 -e TGeant4 -j 2 --skipModules ZDC,PHS</code></p>
<p class="startli">which would launch a simulation for 10 pythia8 events on the whole ALICE detector but ZDC and PHOS, using Geant4 on 2 worker processes.</p>
</li>
<li><b>Generated output</b>: The simulation creates at least the following files:</li>
</ul>
<pre class="fragment">    | file              | description      |
    | ----------------- | ---------------- |
    | `o2sim.root`      | contains kinematics and hits |
    | `O2geometry.root` | contains the ROOT geometry created for simulation |
    | `o2sim_grp.root`  | the grp parameters |
</pre><h2>Main configuration Options</h2>
<p>control of verbosity</p>
<h2>Configuration via Parameters</h2>
<h2>Help on available generators</h2>
<h2>Control via environment variables</h2>
<p><code>o2sim</code> is sensitive to the following environment variables:</p>
<p><b>ALICE_O2SIM_DUMPLOG</b> <b>ALICE_O2SIM_USESHM</b></p>
<p>[Describe in detail the environment variables]</p>
<h2><a class="el" href="../../d0/df3/classData.html">Data</a> layout</h2>
<p>[Add something on data layout of hits file]</p>
<h2>F.A.Q.</h2>
<p>You may contribute to the documentation by asking a question</p>
<h4>1. <b>How can I interface an event generator from ALIROOT</b>?</h4>
<p>In order to access event generators from ALIROOT, such as <code>THijing</code> or <code>TPyhtia6</code>, you may use the <code>-g extgen</code> command line option followed by a <a class="el" href="../../d0/d10/namespaceROOT.html">ROOT</a> macro setting up the event generator. Examples thereof are available in the installation directory <code>$O2_ROOT/share/Generators/external</code>.</p>
<p>For example, in order to simulate with 10 Hijing events, the following command can be run: ``` o2sim -n 10 -g extgen &ndash;extGenFile $O2_ROOT/share/Generators/external/pythia6.C ``` Macro arguments can be passed via <code>--extGenFunc pythia6(14000., "pythia.settings")</code>.</p>
<p>Users may write there own macros in order to customize to their needs.</p>
<h4>2. <b>How can I run on a subset of geometry modules</b>?</h4>
<p>Use the <code>--modules</code> or <code>-m</code> command line option. Example: <code>o2sim -m PIPE ITS TPC</code> will run the simulation on a geometry/material consinsting of PIPE, ITS, TPC.</p>
<h4>3. <b>How can I run with exactly the same events as used in an AliRoot simulation?</b></h4>
<p>One may perform any arbitrary simulation with AliRoot and reuse the kinematics information in form of <code>Kinemtatics.root</code> produced. The file contains primary and possibly secondary particles (added by transportation). When the file is passed to <code>o2sim</code>, the primary particles my be used as the initial event. Use the **<code>-g extkin</code>** command line option: ``` o2sim -g extkin &ndash;extKinFile Kinematics.root ... ```</p>
<h4>4. <b>How can I generate events (signal) using the vertex position of already-generated (background) events?</b></h4>
<p>This process might be called embedding, where one wants to merge two events generated independenly. For that to be physically correct, both events have to originate from the same interaction vertex. Assuming that your already-generated (background) events are stored in the <code>o2sim.background.root</code> file, you can force the interaction vertex for the generation of a new set of events to be the same as the one in the background with the following command line option:</p>
<p>``` o2sim &ndash;embedIntoFile o2sim.background.root ```</p>
<p>Background events are sampled one-by-one until all events have been used. At that point the events start to be reused.</p>
<h4>5. <b>How can I obtained detailed stepping information?</b></h4>
<p>Run the simulation (currently only supported in combination with <code>o2sim_serial</code>) with a preloaded library: ``` MCSTEPLOG_TTREE=1 LD_PRELOAD=$O2_ROOT/lib/libMCStepLogger.so o2sim_serial -j 1 -n 10 ``<code> This will produce a file</code>MCStepLoggerOutput.root` containing detailed information about steps and processes (where, what, ...). The file can be analysed using a special analysis framework. See <a href="https://github.com/AliceO2Group/AliceO2/blob/dev/Utilities/MCStepLogger/README.md">https://github.com/AliceO2Group/AliceO2/blob/dev/Utilities/MCStepLogger/README.md</a> for more documentation.</p>
<h2>Development</h2>
<h1>Documentation of <code>digitizer-workflow</code></h1>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 20 2019 15:26:53 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
